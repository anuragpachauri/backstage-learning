"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8687],{12431:(W,x,a)=>{a.d(x,{E:()=>p});var e=a(14041),E=a(64947),v=a(87667);const p=()=>{const{collapsed:i,setCollapsed:f,visits:L,numVisitsOpen:c,loading:h}=(0,v.NT)(),l=(0,e.useCallback)(()=>f(u=>!u),[f]),o=i?"View More":"View Less";return!h&&L.length<=c?e.createElement(e.Fragment,null):e.createElement(E.A,{variant:"text",onClick:l},o)}},15777:(W,x,a)=>{a.d(x,{U:()=>ne});var e=a(14041),E=a(98590);function v(t){try{const n=t.getString("field"),s=t.getString("operator"),r=p(t);return(0,E.Z)(s)&&r!==void 0?{field:n,operator:s,value:r}:void 0}catch{return}}function p(t){let n;try{n=t.getString("value")}catch{try{n=t.getNumber("value")}catch{}}return n}function i(t){try{return t.map(v).filter(Boolean)}catch{return}}var f=a(69621),L=a(58007),c=a(8109),h=a(91467),l=a(5951),o=a(58837),u=a(72501),O=a(75202);const T=(0,o.A)(t=>({name:{marginLeft:"0.8rem",marginRight:"0.8rem"}})),y=({visit:t})=>{const n=T();return e.createElement(u.A,{component:O.N_,to:t.pathname,noWrap:!0,className:n.name},t.name)};var I=a(52950);const P=({visit:t})=>e.createElement(u.A,{component:"span",variant:"caption",color:"textSecondary"},t.hits," time",t.hits>1?"s":""),K=({visit:t})=>{const n=I.c9.fromMillis(t.timestamp);return e.createElement(u.A,{component:"time",variant:"caption",color:"textSecondary",dateTime:n.toISO()??void 0},n.toRelative())},M=({visit:t,type:n})=>n==="time-ago"?e.createElement(K,{visit:t}):e.createElement(P,{visit:t});var V=a(67720),N=a(48065),R=a(78560);const S=(0,o.A)(t=>({chip:{color:t.palette.common.white,fontWeight:"bold",margin:0}})),U=t=>{try{return(0,R.KU)(t?.entityRef??"")}catch{return}},k=t=>{const n=Object.keys(N.kW),s=t%n.length;return N.kW[n[s]][0]},G=t=>{const n=k(0);if(!t)return n;const r=["component","template","api","group","user","resource","system","domain","location"].indexOf(t.kind.toLocaleLowerCase("en-US"));return r===-1?n:k(r+1)},z=({visit:t})=>{const n=S(),s=U(t);return e.createElement(V.A,{size:"small",className:n.chip,label:(s?.kind??"Other").toLocaleLowerCase("en-US"),style:{background:G(s)}})},H=(0,o.A)(t=>({avatar:{minWidth:0}})),F=({visit:t,detailType:n})=>{const s=H();return e.createElement(c.A,{disableGutters:!0},e.createElement(h.A,{className:s.avatar},e.createElement(z,{visit:t})),e.createElement(l.A,{primary:e.createElement(y,{visit:t}),secondary:e.createElement(M,{visit:t,type:n}),disableTypography:!0}))},Q=()=>e.createElement(e.Fragment,null,e.createElement(u.A,{variant:"body2",color:"textSecondary"},"There are no visits to show yet."),e.createElement(u.A,{variant:"body2",color:"textSecondary"},"Once you start using Backstage, your visits will appear here as a quick link to carry on where you left off.")),Z=()=>e.createElement(e.Fragment,null,e.createElement(u.A,{variant:"body2",color:"textSecondary"},"The more pages you visit, the more pages will appear here."));var b=a(4387);const J=(0,o.A)(t=>({skeleton:{borderRadius:30}})),X=()=>{const t=J();return e.createElement(c.A,{disableGutters:!0},e.createElement(h.A,null,e.createElement(b.A,{className:t.skeleton,variant:"rect",width:50,height:24})),e.createElement(l.A,{primary:e.createElement(b.A,{variant:"text",width:"100%",height:28}),disableTypography:!0}))},Y=({numVisitsOpen:t,numVisitsTotal:n,collapsed:s})=>e.createElement(e.Fragment,null,Array(t).fill(null).map((r,m)=>e.createElement(X,{key:m})),n>t&&e.createElement(f.A,{in:!s},Array(n-t).fill(null).map((r,m)=>e.createElement(X,{key:m})))),_=({detailType:t,visits:n=[],numVisitsOpen:s=3,numVisitsTotal:r=8,collapsed:m=!0,loading:B=!1,title:D=""})=>{let C=e.createElement(e.Fragment,null);return B?C=e.createElement(Y,{numVisitsOpen:s,numVisitsTotal:r,collapsed:m}):n.length===0?C=e.createElement(Q,null):n.length<s?C=e.createElement(e.Fragment,null,n.map((A,g)=>e.createElement(F,{visit:A,key:g,detailType:t})),e.createElement(Z,null)):C=e.createElement(e.Fragment,null,n.slice(0,s).map((A,g)=>e.createElement(F,{visit:A,key:g,detailType:t})),n.length>s&&e.createElement(f.A,{in:!m},n.slice(s,r).map((A,g)=>e.createElement(F,{visit:A,key:g,detailType:t})))),e.createElement(e.Fragment,null,D&&e.createElement("h5",null,D),e.createElement(L.A,{dense:!0,disablePadding:!0},C))};var $=a(87667);const q=()=>{const{collapsed:t,numVisitsOpen:n,numVisitsTotal:s,visits:r,loading:m,kind:B}=(0,$.NT)();return e.createElement(_,{visits:r,detailType:B==="top"?"hits":"time-ago",collapsed:t,numVisitsOpen:n,numVisitsTotal:s,loading:m})};var w=a(18139),ee=a(54195),te=a(73466);const ne=({visits:t,numVisitsOpen:n,numVisitsTotal:s,loading:r,kind:m})=>{const{setContext:B,setVisits:D,setLoading:C}=(0,$.NT)();(0,e.useEffect)(()=>{const d={};d.kind=m,t?(d.visits=t,d.loading=!1):r&&(d.loading=r),n&&(d.numVisitsOpen=n),s&&(d.numVisitsTotal=s),B(ae=>({...ae,...d}))},[B,m,t,r,n,s]);const A=(0,w.gf)(ee.U),g=(0,w.gf)(E.y),{loading:j}=(0,te.A)(async()=>{if(!t&&!r&&m==="recent"){const d=i(A.getOptionalConfigArray("home.recentVisits.filterBy")??[]);return await g.list({limit:s??8,orderBy:[{field:"timestamp",direction:"desc"}],...d&&{filterBy:d}}).then(D)}if(!t&&!r&&m==="top"){const d=i(A.getOptionalConfigArray("home.topVisits.filterBy")??[]);return await g.list({limit:s??8,orderBy:[{field:"hits",direction:"desc"}],...d&&{filterBy:d}}).then(D)}},[g,t,r,D]);return(0,e.useEffect)(()=>{r||C(j)},[r,C,j]),e.createElement(q,null)}},87667:(W,x,a)=>{a.d(x,{DT:()=>f,NT:()=>L});var e=a(14041);const E={collapsed:!0,numVisitsOpen:3,numVisitsTotal:8,visits:[],loading:!0,kind:"recent"},v={...E,setCollapsed:()=>{},setNumVisitsOpen:()=>{},setNumVisitsTotal:()=>{},setVisits:()=>{},setLoading:()=>{},setKind:()=>{},setContext:()=>{}},p=(0,e.createContext)(v),i=(c,h)=>l=>c(o=>({...o,[h]:typeof l=="function"?l(o[h]):l})),f=({children:c})=>{const[h,l]=e.useState(E),{setCollapsed:o,setNumVisitsOpen:u,setNumVisitsTotal:O,setVisits:T,setLoading:y,setKind:I}=(0,e.useMemo)(()=>({setCollapsed:i(l,"collapsed"),setNumVisitsOpen:i(l,"numVisitsOpen"),setNumVisitsTotal:i(l,"numVisitsTotal"),setVisits:i(l,"visits"),setLoading:i(l,"loading"),setKind:i(l,"kind")}),[l]),P={...h,setContext:l,setCollapsed:o,setNumVisitsOpen:u,setNumVisitsTotal:O,setVisits:T,setLoading:y,setKind:I};return e.createElement(p.Provider,{value:P},c)},L=()=>{const c=e.useContext(p);if(c===void 0)throw new Error("VisitedByType useContext found undefined ContextValue, <ContextProvider/> could be missing");return c}},4387:(W,x,a)=>{a.d(x,{A:()=>h});var e=a(89575),E=a(39850),v=a(14041),p=a(9546),i=a(268),f=a(7031),L=function(o){return{root:{display:"block",backgroundColor:(0,i.X4)(o.palette.text.primary,o.palette.type==="light"?.11:.13),height:"1.2em"},text:{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 60%",transform:"scale(1, 0.60)",borderRadius:o.shape.borderRadius,"&:empty:before":{content:'"\\00a0"'}},rect:{},circle:{borderRadius:"50%"},pulse:{animation:"$pulse 1.5s ease-in-out 0.5s infinite"},"@keyframes pulse":{"0%":{opacity:1},"50%":{opacity:.4},"100%":{opacity:1}},wave:{position:"relative",overflow:"hidden","&::after":{animation:"$wave 1.6s linear 0.5s infinite",background:"linear-gradient(90deg, transparent, ".concat(o.palette.action.hover,", transparent)"),content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}},"@keyframes wave":{"0%":{transform:"translateX(-100%)"},"60%":{transform:"translateX(100%)"},"100%":{transform:"translateX(100%)"}},withChildren:{"& > *":{visibility:"hidden"}},fitContent:{maxWidth:"fit-content"},heightAuto:{height:"auto"}}},c=v.forwardRef(function(o,u){var O=o.animation,T=O===void 0?"pulse":O,y=o.classes,I=o.className,P=o.component,K=P===void 0?"span":P,M=o.height,V=o.variant,N=V===void 0?"text":V,R=o.width,S=(0,E.A)(o,["animation","classes","className","component","height","variant","width"]),U=!!S.children;return v.createElement(K,(0,e.A)({ref:u,className:(0,p.default)(y.root,y[N],I,U&&[y.withChildren,!R&&y.fitContent,!M&&y.heightAuto],T!==!1&&y[T])},S,{style:(0,e.A)({width:R,height:M},S.style)}))});const h=(0,f.A)(L,{name:"MuiSkeleton"})(c)}}]);})();

//# sourceMappingURL=8687.7873db0f.chunk.js.map