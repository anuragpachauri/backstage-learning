"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1811,4315],{92303:(K,r,t)=>{t.d(r,{d:()=>c});var e=t(14041),o=t(16654),m=t(82326);function c(s){const{themeId:l,children:i,...d}=s;return e.createElement(m.Y,{themeId:l},e.createElement(o.Y,{...d}),i)}},68401:(K,r,t)=>{t.d(r,{t:()=>mt});var e=t(78560),o=t(77125),m=t(69076),c=t(86901),s=t(16249),l=t(72501),i=t(71677),d=t(58837),f=t(7031),a=t(44148),g=t(41260),y=t(6924),O=t(61783),n=t(14041),x=t(18453),D=t(49724),M=t(92367),j=t(48108),H=t(47966),V=t(53318),Y=t(18139),h=t(87290),T=t(30043),S=t(46123),I=t.n(S);function z({enabled:u}){const E=(0,Y.gf)(T.v),[v]=(0,n.useState)(async()=>{if(!u)return[];const L="relations.ownedBy",R=(await E.getEntityFacets({facets:[L]})).facets[L].map(A=>A.value);return E.getEntitiesByRefs({entityRefs:R}).then(A=>A.items.filter(B=>B!==void 0).map(B=>B).sort((B,J)=>(B.metadata.namespace||"").localeCompare(J.metadata.namespace||"","en-US")||(I()(B,"spec.profile.displayName")||B.metadata.title||B.metadata.name).localeCompare(I()(J,"spec.profile.displayName")||J.metadata.title||J.metadata.name,"en-US")||B.kind.localeCompare(J.kind,"en-US"))).then(A=>A).catch(()=>[])});return(0,h.A)(async(L,W)=>{const R=await v;if(!R)return{items:[]};const A=W?.limit??20,{text:B,start:J}=P(L),Z=R.filter(_=>F(B,_)),X=J+A;return{items:Z.slice(0,X),...N({entities:Z,limit:X,payload:{text:B,start:X}})}},[v],{loading:!0,value:{items:[]}})}function P(u){return p(u)&&u.cursor?JSON.parse(atob(u.cursor)):{text:u.text||"",start:0}}function p(u){return!!u.cursor}function N({entities:u,limit:E,payload:v}){return u.length>E?{cursor:btoa(JSON.stringify(v))}:{}}function F(u,E){const v=u.trim();return E.kind.includes(v)||E.metadata.namespace?.includes(v)||E.metadata.name.includes(v)||E.metadata.title?.includes(v)||I()(E,"spec.profile.displayName")?.includes(v)}function G(){const u=(0,Y.gf)(T.v);return(0,h.A)(async(E,v)=>{const L=E,W=E,R=v?.limit??20;if(W.cursor){const B=await u.queryEntities({cursor:W.cursor,limit:R});return{cursor:B.pageInfo.nextCursor,items:[...W.items,...B.items]}}const A=await u.queryEntities({fullTextFilter:{term:L.text||"",fields:["metadata.name","kind","spec.profile.displayname","metadata.title"]},filter:{kind:["User","Group"]},orderFields:[{field:"metadata.name",order:"asc"}],limit:R});return{cursor:A.pageInfo.nextCursor,items:A.items}},[],{loading:!0})}var $=t(76842);function Q({mode:u,initialSelectedOwnersRefs:E}){const v=u==="owners-only",L=G(),W=z({enabled:v}),[R,A]=v?W:L;return[R,A,k({enabled:!v,initialSelectedOwnersRefs:E})]}function k({enabled:u,initialSelectedOwnersRefs:E}){const v=(0,n.useRef)({}),L=(0,Y.gf)(T.v),[,W]=(0,h.A)(async()=>{(await L.getEntitiesByRefs({entityRefs:E})).items.forEach(A=>{A&&(v.current[(0,e.U2)(A)]=A)})},[]);return(0,$.u)(()=>{u&&E.length>0&&W()}),{getEntity:R=>v.current[R],setEntity:R=>{v.current[(0,e.U2)(R)]=R}}}var tt=t(46509),ot=t(96403),et=t(80084),nt=t(10265);const w=(0,d.A)({root:{},label:{},input:{},fullWidth:{width:"100%"},boxLabel:{width:"100%",textOverflow:"ellipsis",overflow:"hidden"}},{name:"CatalogReactEntityOwnerPicker"}),lt=(0,f.A)(u=>({label:{width:"100%"},root:{width:"90%"}}),{name:"FixedWidthFormControlLabel"})(c.A),rt=n.createElement(g.A,{fontSize:"small"}),ct=n.createElement(a.A,{fontSize:"small"});function it(u){const E=w(),v=u.entity.kind.toLocaleLowerCase("en-US")==="group",{primaryTitle:L}=(0,tt.f)(u.entity);return n.createElement(o.A,{className:E.fullWidth},n.createElement(lt,{className:E.fullWidth,control:n.createElement(m.A,{icon:rt,checkedIcon:ct,checked:u.isSelected}),onClick:W=>W.preventDefault(),label:n.createElement(i.Ay,{title:L},n.createElement(o.A,{display:"flex",alignItems:"center"},v?n.createElement(H.A,{fontSize:"small"}):n.createElement(j.A,{fontSize:"small"}),"\xA0",n.createElement(o.A,{className:E.boxLabel},n.createElement(l.A,{noWrap:!0},L))))}))}const mt=u=>{const E=w(),{mode:v="owners-only"}=u||{},{updateFilters:L,filters:W,queryParameters:{owners:R}}=(0,x.nK)(),[A,B]=(0,n.useState)(""),{t:J}=(0,nt.i)(et.j),Z=(0,n.useMemo)(()=>[R].flat().filter(Boolean),[R]),[X,_]=(0,n.useState)(Z.length?Z:W.owners?.values??[]),[{value:q,loading:dt},at,st]=Q({mode:v,initialSelectedOwnersRefs:X});(0,M.s)(()=>at({text:A}),[A,at],250);const ut=q?.items||[];return(0,n.useEffect)(()=>{if(Z.length){const C=new D.N9(Z);_(C.values)}},[Z]),(0,n.useEffect)(()=>{L({owners:X.length?new D.N9(X):void 0})},[X,L]),["user","group"].includes(W.kind?.value.toLocaleLowerCase("en-US")||"")?null:n.createElement(o.A,{className:E.root,pb:1,pt:1},n.createElement(l.A,{className:E.label,variant:"button",component:"label"},J("entityOwnerPicker.title"),n.createElement(O.Ay,{PopperComponent:C=>n.createElement("div",{...C},C.children),multiple:!0,disableCloseOnSelect:!0,loading:dt,options:ut,value:X,getOptionSelected:(C,U)=>typeof U=="string"?(0,e.U2)(C)===U:C===U,getOptionLabel:C=>{const U=typeof C=="string"?st.getEntity(C)||(0,e.KU)(C,{defaultKind:"group",defaultNamespace:"default"}):C;return(0,V.Z)(U,(0,V.S)(U))},onChange:(C,U)=>{B(""),_(U.map(b=>{const Et=typeof b=="string"?b:(0,e.U2)(b);return typeof b!="string"&&st.setEntity(b),Et}))},filterOptions:C=>C,renderOption:(C,{selected:U})=>n.createElement(it,{entity:C,isSelected:U}),size:"small",popupIcon:n.createElement(y.A,{"data-testid":"owner-picker-expand"}),renderInput:C=>n.createElement(s.A,{...C,className:E.input,onChange:U=>{B(U.currentTarget.value)},variant:"outlined"}),ListboxProps:{onScroll:C=>{const U=C.currentTarget;Math.abs(U.scrollHeight-U.clientHeight-U.scrollTop)<1&&q?.cursor&&at({items:q.items,cursor:q.cursor})},"data-testid":"owner-picker-listbox"}})))}},54674:(K,r,t)=>{t.d(r,{o:()=>Y});var e=t(77125),o=t(64947),m=t(58837),c=t(72501),s=t(14041),l=t(65995),i=t(62112),d=t(75202),f=t(16400),a=t(46343),g=t.n(a),y=t(40074),O=t.n(y),n=t(46123),x=t.n(n),D=t(96403),M=t.n(D);const j=(0,m.A)(h=>({code:{borderRadius:6,margin:h.spacing(2,0),background:h.palette.type==="dark"?"#444":h.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function H(h,T){const S=T?.kind||"Component",I=T?.metadata.name||"example",z=T?.spec?.type||"website",P=T?.spec?.owner||"user:default/guest",p=`apiVersion: backstage.io/v1alpha1
kind: ${S}
metadata:
  name: ${I}
  annotations:${h.map(G=>`
    ${G}: value`).join("")}
spec:
  type: ${z}
  owner: ${P}`;let N=6;const F=[];return h.forEach(()=>{F.push(N),N++}),{yamlText:p,lineNumbers:F}}function V(h,T="Component"){const S=h.length<=1;return s.createElement(s.Fragment,null,"The ",S?"annotation":"annotations"," ",h.map(I=>s.createElement("code",null,I)).reduce((I,z)=>s.createElement(s.Fragment,null,I,", ",z))," ",S?"is":"are"," missing. You need to add the"," ",S?"annotation":"annotations"," to your ",T," if you want to enable this tool.")}function Y(h){let T;try{T=(0,f.tN)().entity}catch{}const{annotation:S,readMoreUrl:I}=h,z=Array.isArray(S)?S:[S],P=I||"https://backstage.io/docs/features/software-catalog/well-known-annotations",p=j(),N=T?.kind||"Component",{yamlText:F,lineNumbers:G}=H(z,T);return s.createElement(l.p,{missing:"field",title:"Missing Annotation",description:V(z,N),action:s.createElement(s.Fragment,null,s.createElement(c.A,{variant:"body1"},"Add the annotation to your ",N," YAML as shown in the highlighted example below:"),s.createElement(e.A,{className:p.code},s.createElement(i.z,{text:F,language:"yaml",showLineNumbers:!0,highlightedNumbers:G,customStyle:{background:"inherit",fontSize:"115%"}})),s.createElement(o.A,{color:"primary",component:d.N_,to:P},"Read more"))})}},19108:(K,r,t)=>{t.d(r,{A:()=>e,G:()=>o});const e="backstage.io/techdocs-ref",o="backstage.io/techdocs-entity"},11811:(K,r,t)=>{t.r(r),t.d(r,{EmbeddedDocsRouter:()=>x,Router:()=>n,isTechDocsAvailable:()=>O});var e=t(14041),o=t(18690),m=t(78560),c=t(19108),s=t(64392),l=t(74378),i=t(84893);const d=({entity:D})=>{let M=(0,m.sM)(D);if(D.metadata.annotations?.[c.G])try{M=(0,m.KU)(D.metadata.annotations?.[c.G])}catch{}return e.createElement(s.Wj,{entityRef:M},e.createElement(i.Z,null),e.createElement(l.p,{withSearch:!1}))};var f=t(4315),a=t(33402),g=t(16400),y=t(54674);const O=D=>!!D?.metadata?.annotations?.[c.A]||!!D?.metadata?.annotations?.[c.G],n=()=>e.createElement(o.BV,null,e.createElement(o.qh,{path:"/",element:e.createElement(f.TechDocsIndexPage,null)}),e.createElement(o.qh,{path:"/:namespace/:kind/:name/*",element:e.createElement(a.W,null)})),x=D=>{const{children:M}=D,{entity:j}=(0,g.tN)(),H=(0,o.Ye)([{path:"/*",element:e.createElement(d,{entity:j}),children:[{path:"*",element:M}]}]);return j.metadata.annotations?.[c.A]||j.metadata.annotations?.[c.G]?H:e.createElement(y.o,{annotation:[c.A]})}},4348:(K,r,t)=>{t.d(r,{V:()=>e});function e(o,m){return m.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")?o:o.toLocaleLowerCase("en-US")}},67633:(K,r,t)=>{t.d(r,{o:()=>M});var e=t(14041),o=t(36338),m=t(72814),c=t(18139),s=t(54195),l=t(97214),i=t(699),d=t(53318),f=t(17749),a=t(29021),g=t(65995),y=t(87318),O=t(143),n=t(48751),x=t(4348);const D=[n.B.createTitleColumn({hidden:!0}),n.B.createNameColumn(),n.B.createOwnerColumn(),n.B.createKindColumn(),n.B.createTypeColumn()],M=j=>{const{entities:H,title:V,loading:Y,columns:h,actions:T,options:S}=j,[,I]=(0,o.A)(),z=(0,m.S)(f.Oc),P=(0,c.gf)(s.U);if(!H)return null;const p=H.map($=>{const Q=(0,i.t)($,l.vv);return{entity:$,resolved:{docsUrl:z({namespace:(0,x.V)($.metadata.namespace??"default",P),kind:(0,x.V)($.kind,P),name:(0,x.V)($.metadata.name,P)}),ownedByRelations:Q,ownedByRelationsTitle:Q.map(k=>(0,d.S)(k,{defaultKind:"group"})).join(", ")}}}),N=[O.f.createCopyDocsUrlAction(I)],F=20,G=p&&p.length>F;return e.createElement(e.Fragment,null,Y||p&&p.length>0?e.createElement(a.X,{isLoading:Y,options:{paging:G,pageSize:F,search:!0,actionsColumnIndex:-1,...S},data:p,columns:h||D,actions:T||N,title:V?`${V} (${p.length})`:`All (${p.length})`}):e.createElement(g.p,{missing:"data",title:"No documents to show",description:"Create your own document. Check out our Getting Started Information",action:e.createElement(y.z,{color:"primary",to:"https://backstage.io/docs/features/techdocs/getting-started",variant:"contained"},"DOCS")}))};M.columns=n.B,M.actions=O.f},143:(K,r,t)=>{t.d(r,{f:()=>i});var e=t(14041),o=t(55290),m=t(7031),c=t(80109),s=t(15303);const l=(0,m.A)({root:{color:"#f3ba37"}})(c.A),i={createCopyDocsUrlAction(d){return f=>({icon:()=>e.createElement(o.A,{fontSize:"small"}),tooltip:"Click to copy documentation link to clipboard",onClick:()=>d(`${window.location.origin}${f.resolved.docsUrl}`)})},createStarEntityAction(d,f){return a=>{const g=a.entity,y=d(g);return{cellStyle:{paddingLeft:"1em"},icon:()=>y?e.createElement(l,null):e.createElement(s.A,null),tooltip:y?"Remove from favorites":"Add to favorites",onClick:()=>f(g)}}}}},48751:(K,r,t)=>{t.d(r,{B:()=>f});var e=t(14041),o=t(77125),m=t(58837);const c=(0,m.A)(a=>({value:{marginBottom:a.spacing(.75)},subvalue:{color:a.palette.textSubtle,fontWeight:"normal"}}),{name:"BackstageSubvalueCell"});function s(a){const{value:g,subvalue:y}=a,O=c();return e.createElement(e.Fragment,null,e.createElement(o.A,{className:O.value},g),e.createElement(o.A,{className:O.subvalue},y))}var l=t(75202),i=t(14158);function d(a){return a.metadata.title||a.metadata.name}const f={createTitleColumn(a){return{...f.createNameColumn(),field:"entity.metadata.title",hidden:a?.hidden}},createNameColumn(){return{title:"Document",field:"entity.metadata.name",highlight:!0,searchable:!0,defaultSort:"asc",customSort:(a,g)=>{const y=d(a.entity).toLocaleLowerCase(),O=d(g.entity).toLocaleLowerCase();return y.localeCompare(O)},render:a=>e.createElement(s,{value:e.createElement(l.N_,{to:a.resolved.docsUrl},d(a.entity)),subvalue:a.entity.metadata.description})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:a})=>e.createElement(i.i,{entityRefs:a.ownedByRelations,defaultKind:"group"})}},createKindColumn(){return{title:"Kind",field:"entity.kind"}},createTypeColumn(){return{title:"Type",field:"entity.spec.type"}}}},4315:(K,r,t)=>{t.r(r),t.d(r,{TechDocsIndexPage:()=>z});var e=t(14041),o=t(18690),m=t(16454),c=t(17138),s=t(56420),l=t(18453),i=t(77509),d=t(30117),f=t(68401),a=t(56829),g=t(88461),y=t(24259),O=t(19108);class n{getCatalogFilters(){return{[`metadata.annotations.${O.A}`]:y.c}}}const x=()=>{const{updateFilters:P}=(0,l.nK)();return(0,e.useEffect)(()=>{P({techdocs:new n})},[P]),null};var D=t(36338),M=t(45250),j=t(99338),H=t(62112),V=t(44861),Y=t(67633),h=t(143),T=t(48751);const S=P=>{const{columns:p,actions:N,options:F}=P,{loading:G,error:$,entities:Q,filters:k}=(0,l.nK)(),{isStarredEntity:tt,toggleStarredEntity:ot}=(0,V.I)(),[,et]=(0,D.A)(),nt=(0,M.capitalize)(k.user?.value??"all"),w=[h.f.createCopyDocsUrlAction(et),h.f.createStarEntityAction(tt,ot)];return $?e.createElement(j.B,{severity:"error",title:"Could not load available documentation."},e.createElement(H.z,{language:"text",text:$.toString()})):e.createElement(Y.o,{title:nt,entities:Q,loading:G,actions:N||w,columns:p,options:F})};S.columns=T.B,S.actions=h.f;const I=P=>{const{initialFilter:p="owned",columns:N,actions:F,ownerPickerMode:G}=P;return e.createElement(g.S,null,e.createElement(m.U,null,e.createElement(c.d,{title:""},e.createElement(s.Y,null,"Discover documentation in your ecosystem.")),e.createElement(l.B9,null,e.createElement(i.GI,null,e.createElement(i.GI.Filters,null,e.createElement(x,null),e.createElement(d.y,{initialFilter:p}),e.createElement(f.t,{mode:G}),e.createElement(a.m,null)),e.createElement(i.GI.Content,null,e.createElement(S,{actions:F,columns:N}))))))},z=P=>(0,o.P1)()||e.createElement(I,{...P})},88461:(K,r,t)=>{t.d(r,{S:()=>s});var e=t(14041),o=t(92303),m=t(18139),c=t(54195);const s=l=>{const{children:i}=l,f=`Documentation available in ${(0,m.gf)(c.U).getOptionalString("organization.name")??"Backstage"}`;return e.createElement(o.d,{title:"Documentation",subtitle:f,themeId:"documentation"},i)}},47966:(K,r,t)=>{var e,o=t(4293),m=t(78920);e={value:!0},r.A=void 0;var c=m(t(14041)),s=o(t(74044)),l=(0,s.default)(c.createElement("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}),"Group");r.A=l},55290:(K,r,t)=>{var e,o=t(4293),m=t(78920);e={value:!0},r.A=void 0;var c=m(t(14041)),s=o(t(74044)),l=(0,s.default)(c.createElement("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"}),"Share");r.A=l},92367:(K,r,t)=>{t.d(r,{s:()=>s});var e=t(14041),o=t(16261);function m(l){const i=(0,o.J)(l);(0,e.useEffect)(()=>()=>{i.current()},[])}function c(l,i,d,f=0){const a=(0,e.useRef)(),g=(0,e.useRef)(),y=(0,e.useRef)(l),O=(0,e.useRef)(),n=()=>{a.current&&(clearTimeout(a.current),a.current=void 0),g.current&&(clearTimeout(g.current),g.current=void 0)};return m(n),(0,e.useEffect)(()=>{y.current=l},i),(0,e.useMemo)(()=>{const x=()=>{if(n(),!O.current)return;const M=O.current;O.current=void 0,y.current.apply(M.this,M.args)},D=function(...M){a.current&&clearTimeout(a.current),O.current={args:M,this:this},a.current=setTimeout(x,d),f>0&&!g.current&&(g.current=setTimeout(x,f))};return Object.defineProperties(D,{length:{value:l.length},name:{value:`${l.name||"anonymous"}__debounced__${d}`}}),D},[d,f,...i])}function s(l,i,d,f=0){(0,e.useEffect)(c(l,i,d,f),i)}}}]);})();

//# sourceMappingURL=1811.0d0be646.chunk.js.map